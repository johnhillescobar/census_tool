# Unused Files Report

Generated by analyzing imports from entry points: `main.py`, `app.py`, `streamlit_app.py`, `launcher.py`

## Summary

Files that are **NOT imported** from any entry point or used in the application workflow.

---

## Root Level Scripts (Standalone/Test Files)

**‚úÖ VERIFIED & DELETED:** These were standalone scripts not imported from any entry point.

**Deleted files:**
- ‚úÖ **analyze_api_calls.py** - Standalone analysis script
- ‚úÖ **analyze_api_calls_v2.py** - Standalone analysis script
- ‚úÖ **test_all_questions.py** - Standalone test runner

**Note:** `test_questions_1_10.py`, `test_questions_11_50.py`, `test_questions_51_70.py`, and `test_session_logging.py` were previously deleted.

---

## Index Directory (Build/Utility Scripts)

**‚úÖ VERIFIED:** These build scripts match the ChromaDB collections currently in use. They are necessary for maintaining the indexes.

8. **index/build_geography_index.py** - Builds `census_geography_hierarchies` collection (used by geography_hierarchy_tool)
9. **index/build_index.py** - Builds `census_vars` collection (used by variable search)
10. **index/build_index_table.py** - Builds `census_tables` collection (used by table search)
11. **index/read_query.py** - Utility script for querying `census_tables` collection

**Note:** See `CHROMADB_COLLECTIONS_VERIFICATION.md` for detailed verification.

---

## Scripts Directory

**‚úÖ VERIFIED & DELETED:** Standalone utility script not imported from any entry point.

**Deleted files:**
- ‚úÖ **scripts/extract_census_examples.py** - Utility script for extracting Census examples

---

## src/utils - Unused Utility Files

**‚úÖ VERIFIED & DELETED:** These utility files were NOT imported anywhere in the application. See `UNUSED_UTILS_VERIFICATION.md` for detailed evidence.

**Deleted files:**
- ‚úÖ **src/utils/cache_utils.py** - Cache utilities (functionality handled by memory_utils.py)
- ‚úÖ **src/utils/retrieval_utils.py** - Retrieval utilities (functionality handled by chroma_utils.py)
- ‚úÖ **src/utils/retrieval_utils_tables.py** - Table retrieval utilities (functionality handled by table_search_tool.py)
- ‚úÖ **src/utils/planning_utils.py** - Planning utilities (contained stub functions with TODO)
- ‚úÖ **src/utils/geo_resolver.py** - Geography resolver (stub file, duplicate exists in services/geography_cache.py)
- ‚úÖ **src/utils/variable_selection.py** - Variable selection utilities (functionality handled by census_query_agent.py)
- ‚úÖ **src/utils/test_geography_registry.py** - Test file (standalone test, duplicate tests exist in app_test_scripts/)

---

## src/llm - Unused LLM Files

**‚úÖ VERIFIED:** These files are not used in the application workflow.

20. **src/llm/factory_legacy.py** - Legacy factory (üî¥ NOT USED - imported conditionally in factory.py:36 when `ENABLE_FACTORY=False`, but `ENABLE_FACTORY=True` always, so condition never executes) - **KEPT** (user requested to keep)

**Deleted files:**
- ‚úÖ **src/llm/test_category_detector.py** - Standalone test

---

## src/utils/agents - Unused Agent Files

**‚úÖ VERIFIED & DELETED:** Standalone test file not imported from any entry point.

**Deleted files:**
- ‚úÖ **src/utils/agents/test_query_agent.py** - Standalone test

---

## src/services - Unused Service Files

**‚úÖ VERIFIED & DELETED:** These files formed a dependency chain that was ONLY used in test files, not in the main application.

**Execution trace from main.py:**
- main.py ‚Üí app.py ‚Üí nodes ‚Üí agent ‚Üí **NONE of these files appeared in call chain**
- Searched src/nodes/, src/tools/, src/utils/agents/ ‚Üí **NO IMPORTS FOUND**

**Deleted files:**
- ‚úÖ **src/services/geography_cache.py** - Geography cache service (only imported in test_dynamic_geography.py)
- ‚úÖ **src/services/census_geocoding.py** - Census geocoding service (only imported by geography_cache.py)
- ‚úÖ **src/utils/geo_parser.py** - Geography parser (only imported by geography_cache.py)
- ‚úÖ **app_test_scripts/test_dynamic_geography.py** - Test file that only tested these unused service files

---

## src/locations - Data Processing Scripts

**‚úÖ VERIFIED & DELETED:** Data processing script not imported from any entry point.

**Deleted files:**
- ‚úÖ **src/locations/counties.py** - Data processing script (processes Excel to CSV)

---

---

## Total Count

**1 file** remaining unused: `src/llm/factory_legacy.py` (kept per user request)

**Deleted in this session:**
- ‚úÖ `analyze_api_calls.py` - Standalone script
- ‚úÖ `analyze_api_calls_v2.py` - Standalone script
- ‚úÖ `test_all_questions.py` - Standalone test script
- ‚úÖ `scripts/extract_census_examples.py` - Standalone utility
- ‚úÖ `src/llm/test_category_detector.py` - Standalone test
- ‚úÖ `src/utils/agents/test_query_agent.py` - Standalone test
- ‚úÖ `src/services/geography_cache.py` - Only used in tests
- ‚úÖ `src/services/census_geocoding.py` - Only used in tests
- ‚úÖ `src/utils/geo_parser.py` - Only used in tests
- ‚úÖ `src/locations/counties.py` - Data processing script
- ‚úÖ `app_test_scripts/test_dynamic_geography.py` - Test file for unused services

**Previously deleted:**
- ‚úÖ 4 test files (`test_questions_1_10.py`, `test_questions_11_50.py`, `test_questions_51_70.py`, `test_session_logging.py`)
- ‚úÖ 7 utility files (`cache_utils.py`, `retrieval_utils.py`, `retrieval_utils_tables.py`, `planning_utils.py`, `geo_resolver.py`, `variable_selection.py`, `test_geography_registry.py`)

**Total deleted:** 22 files (11 in this session + 11 previously)

**Note:** 4 index build scripts are **NOT unused** - they maintain ChromaDB collections (verified in `CHROMADB_COLLECTIONS_VERIFICATION.md`)

**See `DEEP_USAGE_VERIFICATION.md` for detailed integration trace evidence.**

---

## Note on Broken Imports

**src/tools/table_search_tool.py** - This file IS used (imported by `census_query_agent.py`), but has an incorrect import path (`from utils.chroma_utils` instead of `from src.utils.chroma_utils`). It works due to `sys.path.append`, but should be fixed for clarity.

---

## Recommendations

1. **Test files** - ‚úÖ **DELETED** - All test files have been removed
2. **Build scripts** - ‚úÖ **KEEP ALL** - All 4 index build scripts are verified and necessary for ChromaDB collections
3. **Unused utilities** - ‚úÖ **DELETED** - 7 unused utility files have been removed
4. **Service files** - ‚úÖ **DELETED** - `geography_cache.py`, `census_geocoding.py`, `geo_parser.py`, and `test_dynamic_geography.py` have been removed
5. **Import paths** - Fix `table_search_tool.py` import path for clarity (currently works but uses incorrect path)
6. **Standalone scripts** - ‚úÖ **DELETED** - All standalone analysis/test scripts have been removed
7. **factory_legacy.py** - ‚ö†Ô∏è **KEPT** - Per user request, though unused (conditional import never executes)

